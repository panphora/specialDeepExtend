{"version":3,"sources":["node_modules/deep-equal/lib/keys.js","node_modules/deep-equal/lib/is_arguments.js","node_modules/deep-equal/index.js","index.js"],"names":["deepEqual","require","isObject","a","Array","isArray","getDataType","forEachKeyValuePair","obj","cb","Object","keys","forEach","k","testSourceObjects","timelines","id","text","extra","other","list","data","children","extraData","choices","choiceText","testTargetObjects","notes","testExpectedOutputs","testSourceObject","i","testTargetObject","testExpectedOutput","output","specialDeepExtend","console","log","JSON","stringify","sourceOriginal","targetOriginal","parse","_specialDeepExtend","source","target","parentKey","parent","dontOverwriteKeysWithPlainValues","sourceType","targetType","key","targetValue","targetValueType","_insertMissingKeyValuePairs","targetItem","matchingSourceItem","find","sourceItem","undefined","value"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC9FA,IAAMA,SAAS,GAAGC,OAAO,CAAC,YAAD,CAAzB;;AAGA,IAAIC,QAAQ,GAAG,SAAXA,QAAW,CAACC,CAAD;AAAA,SAAO,QAAOA,CAAP,MAAa,QAAb,IAAyBA,CAAC,KAAK,IAA/B,IAAuC,CAACC,KAAK,CAACC,OAAN,CAAcF,CAAd,CAA/C;AAAA,CAAf;;AACA,IAAIE,OAAO,GAAG,SAAVA,OAAU,CAACF,CAAD;AAAA,SAAOC,KAAK,CAACC,OAAN,CAAcF,CAAd,CAAP;AAAA,CAAd;;AACA,IAAIG,WAAW,GAAG,SAAdA,WAAc,CAACH,CAAD;AAAA,SACfD,QAAQ,CAACC,CAAD,CAAT,GACI,QADJ,GAEKE,OAAO,CAACF,CAAD,CAAR,GACA,OADA,GAEA,OALY;AAAA,CAAlB;;AAOA,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","file":"index.js","sourceRoot":"..","sourcesContent":["exports = module.exports = typeof Object.keys === 'function'\n  ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n","var supportsArgumentsClass = (function(){\n  return Object.prototype.toString.call(arguments)\n})() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n};\n\nexports.unsupported = unsupported;\nfunction unsupported(object){\n  return object &&\n    typeof object == 'object' &&\n    typeof object.length == 'number' &&\n    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n    false;\n};\n","var pSlice = Array.prototype.slice;\nvar objectKeys = require('./lib/keys.js');\nvar isArguments = require('./lib/is_arguments.js');\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n  // 7.4. For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (isArguments(a)) {\n    if (!isArguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = objectKeys(a),\n        kb = objectKeys(b);\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return typeof a === typeof b;\n}\n","const deepEqual = require('deep-equal');\n\n\nlet isObject = (a) => typeof a === \"object\" && a !== null && !Array.isArray(a);\nlet isArray = (a) => Array.isArray(a);\nlet getDataType = (a) => (\n  (isObject(a))\n    ? \"object\" \n    : (isArray(a))\n    ? \"array\"\n    : \"other\"\n);\nlet forEachKeyValuePair = (obj, cb) => {\n  Object.keys(obj).forEach(function (k) {\n    cb(k, obj[k]);\n  });\n};\n\n\nlet testSourceObjects = [\n  {\n    timelines: [\n      {id: \"1\", text: \"1\"},\n      {id: \"2\", text: \"2\", extra: \"a\"},\n      {id: \"3\", text: \"3\"}\n    ],\n    other: \"y\"\n  },\n  {\n    list: [\n      {\n        id: \"1\", \n        data: \"a\",\n        children: [\n          {\n            id: \"2\", \n            data: \"b\",\n            extraData: \"h\",\n            children: [\n              {\n                id: \"3\",\n                data: \"c\"\n              }\n            ]\n          }\n        ]\n      },\n    ]\n  },\n  {\n    id: \"6\",\n    text: \"a\",\n    choices: [\n      {\n        id: \"1\",\n        choiceText: \"b\",\n        choices: [\n          {\n            id: \"3\",\n            choiceText: \"d\",\n            choices: []\n          }\n        ]\n      },\n      {\n        id: \"2\",\n        choiceText: \"c\",\n        choices: [\n          {\n            id: \"4\",\n            choiceText: \"e\",\n            choices: []\n          }\n        ]\n      }\n    ]\n  },\n  [\n    {\n      id: \"1\", \n      children: [\n        {\n          id: \"2\", \n          extraData: \"h\"\n        }\n      ]\n    }\n  ]\n];\n\nlet testTargetObjects = [\n  {\n    timelines: [\n      {id: \"1\", text: \"1\", notes: [\"a\", \"b\", \"c\"]},\n      {id: \"2\", text: \"different\"},\n      {id: \"4\", text: \"4\"}\n    ],\n    other: \"x\",\n    extra: []\n  },\n  {\n    list: [\n      {\n        id: \"1\", \n        data: \"z\",\n        children: [\n          {\n            id: \"2\", \n            data: \"y\",\n            extraData: \"h\",\n            children: [\n              {\n                id: \"3\",\n                data: \"x\"\n              }\n            ]\n          }\n        ]\n      },\n    ]\n  },\n  {\n    id: \"6\",\n    text: \"a\",\n    choices: [\n      {\n        id: \"1\",\n        choiceText: \"bbbb\"\n      },\n      {\n        id: \"2\",\n        choiceText: \"cccc\"\n      }\n    ]\n  },\n  [\n    {\n      id: \"1\", \n      children: [\n        {\n          id: \"2\"\n        }\n      ]\n    }\n  ]\n];\n\nlet testExpectedOutputs = [\n  {\n    timelines: [\n      {id: \"1\", text: \"1\", notes: [\"a\", \"b\", \"c\"]},\n      {id: \"2\", text: \"different\", extra: \"a\"},\n      {id: \"4\", text: \"4\"}\n    ],\n    other: \"x\",\n    extra: []\n  },\n  {\n    list: [\n      {\n        id: \"1\", \n        data: \"z\",\n        children: [\n          {\n            id: \"2\", \n            data: \"y\",\n            extraData: \"h\",\n            children: [\n              {\n                id: \"3\",\n                data: \"x\"\n              }\n            ]\n          }\n        ]\n      },\n    ]\n  },\n  {\n    id: \"6\",\n    text: \"a\",\n    choices: [\n      {\n        id: \"1\",\n        choiceText: \"bbbb\",\n        choices: [\n          {\n            id: \"3\",\n            choiceText: \"d\",\n            choices: []\n          }\n        ]\n      },\n      {\n        id: \"2\",\n        choiceText: \"cccc\",\n        choices: [\n          {\n            id: \"4\",\n            choiceText: \"e\",\n            choices: []\n          }\n        ]\n      }\n    ]\n  },\n  [\n    {\n      id: \"1\", \n      children: [\n        {\n          id: \"2\", \n          extraData: \"h\"\n        }\n      ]\n    }\n  ]\n];\n\n\ntestSourceObjects.forEach(function (testSourceObject, i) {\n  let testTargetObject = testTargetObjects[i];\n  let testExpectedOutput = testExpectedOutputs[i]\n\n  let output = specialDeepExtend(testSourceObject, testTargetObject);\n\n  console.log(`test ${i}:`, deepEqual(output, testExpectedOutput) ? \"PASSED\" : \"FAILED\");\n  console.log(1, JSON.stringify(output));\n  console.log(2, JSON.stringify(testExpectedOutput));\n});\n\n\n// object with id 1 has the notes key added to it\n// object with id 2 is changed\n// object with id 3 is removed\n// object with id 4 is added (to the end of the array)\n// other prop is changed\n// extra prop is added on\n// not shown: nested data is also deep extended using specialDeepExtend\n\n\n\n// specialDeepReplace uses ids to extend, add, or remove array items\n// # rules:\n//   - objects can contain arrays or strings in their keys\n//   - arrays can only contain objects, not strings or other primitives\nfunction specialDeepExtend (sourceOriginal, targetOriginal) {\n  // copy the data, so it's not modified\n  sourceOriginal = JSON.parse(JSON.stringify(sourceOriginal));\n  targetOriginal = JSON.parse(JSON.stringify(targetOriginal));\n  return _specialDeepExtend(sourceOriginal, targetOriginal);\n}\n\n// this function will modify data, while the parent specialDeepExtend will not\nfunction _specialDeepExtend (source, target, parentKey, parent, dontOverwriteKeysWithPlainValues) {\n  let sourceType = getDataType(source);\n  let targetType = getDataType(target);\n\n  if (targetType === \"object\") {\n\n    forEachKeyValuePair(target, (key, targetValue) => {\n      let targetValueType = getDataType(targetValue);\n\n      if (targetValueType === \"array\" || targetValueType === \"object\") {\n        _specialDeepExtend(source[key], targetValue, key, source);\n      } else if (!dontOverwriteKeysWithPlainValues) {\n        source[key] = targetValue;\n      }\n    });\n\n    _insertMissingKeyValuePairs(source, target);\n\n  } else if (targetType === \"array\") {\n\n    target.forEach((targetItem) => {\n      let matchingSourceItem = source.find(sourceItem => sourceItem.id === targetItem.id);\n      if (matchingSourceItem) {\n        _insertMissingKeyValuePairs(targetItem, matchingSourceItem);\n        _specialDeepExtend(targetItem, matchingSourceItem, undefined, undefined, true);\n      }\n    });\n\n    if (parent) {\n      parent[parentKey] = target;\n    } else {\n      source = target;\n    }\n\n  }\n\n  return source;\n}\n\nfunction _insertMissingKeyValuePairs (target, source) {\n  forEachKeyValuePair(source, (key, value) => {\n    if (target[key] === undefined) {\n      target[key] = value;\n    }\n  });\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"]}